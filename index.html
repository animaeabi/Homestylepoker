<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <title>Home Game Buy-in Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Fraunces:opsz,wght@9..144,500;9..144,700&family=Manrope:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css?v=20260212a" />
  </head>
  <body class="theme-dark">
    <div class="app">
      <header class="topbar">
        <button id="homeTitle" class="brand brand-button" type="button" aria-label="Back to home">
          <span id="brandIcon" class="brand-icon" aria-hidden="true" title="Toggle header lights">♠</span>
          <h1>POKER NIGHTS</h1>
        </button>
      </header>

      <section id="landing" class="landing">
        <div id="landingNotice" class="landing-notice hidden" role="status" aria-live="polite"></div>
        <div class="landing-card lets-play" id="letsDealCard">
          <button
            id="letsDealToggle"
            class="lets-deal-toggle"
            type="button"
            aria-expanded="false"
            aria-controls="letsDealBody"
          >
            <span class="host-icon host-icon-collapsed" aria-hidden="true"></span>
            <span class="host-icon host-icon-expanded" aria-hidden="true"></span>
            <span class="lets-deal-title">Deal</span>
            <span class="host-icon host-icon-right host-icon-collapsed" aria-hidden="true"></span>
            <span class="host-icon host-icon-right host-icon-expanded" aria-hidden="true"></span>
            <span class="deal-chevron" aria-hidden="true"></span>
          </button>
          <div id="letsDealBody" class="lets-deal-body hidden">
            <label class="field">
              <span>Game name</span>
              <input id="newGameName" type="text" placeholder="Generating name..." />
            </label>
            <label class="field">
              <span>Buy-in amount</span>
              <input id="newBuyIn" type="number" min="1" step="1" placeholder="10" value="10" />
            </label>
            <label class="field">
              <span>Host name</span>
              <input id="newHostName" type="text" placeholder="Your name" required />
            </label>
            <label class="field">
              <span>Group (optional)</span>
              <select id="gameGroup">
                <option value="">No group (one-off)</option>
              </select>
            </label>
          <button id="createGame" class="primary host-game-btn">Host game</button>
          </div>
          <button id="joinPlayer" class="deal-button deal-bronze join-standalone" type="button">
            <img class="join-icon" src="assets/table.png" alt="" aria-hidden="true" />
            <span class="join-text">Join table</span>
          </button>
          <p class="landing-inline-hint">Joining a game? Start here.</p>
        </div>

        <div class="landing-side">
          <div class="landing-card compact action-card">
            <div class="landing-actions">
              <button id="openSessions" class="deal-button deal-secondary" type="button">Casual Sessions</button>
              <button
                id="toggleGroups"
                class="deal-button deal-secondary"
                type="button"
                aria-expanded="false"
                aria-controls="groupsHubModal"
              >
                Group Sessions
              </button>
            </div>
          </div>
        </div>
        <div class="landing-ornament">
          <span class="ornament-line"></span>
          <span
            id="ornamentToggle"
            class="ornament-crest"
            role="button"
            tabindex="0"
            aria-label="Toggle lights"
            aria-pressed="false"
          >
            ♠
          </span>
          <span class="ornament-line"></span>
        </div>
        <div class="landing-ornament-suits" aria-hidden="true">
          <span>♣</span>
          <span>♦</span>
          <span>♥</span>
          <span>♠</span>
        </div>
      </section>

      <section id="configNotice" class="banner hidden">
        <div>
          <strong>Connect Supabase to continue.</strong>
          <p>Update <code>config.js</code> with your Supabase URL and anon key.</p>
        </div>
      </section>

      <section id="gamePanel" class="game hidden">
        <div class="game-bar">
          <div class="game-info">
            <div class="game-title-row">
              <h2 id="gameTitle">Loading…</h2>
              <button id="terminateGame" class="danger-outline terminate-cta">Cancel Game</button>
            </div>
            <div class="info-chip">
              Code
              <strong id="gameCode">—</strong>
            </div>
            <div class="info-chip status-chip">
              Status
              <strong id="gameStatusChip">Live</strong>
            </div>
            <div id="gamePotChip" class="info-chip hidden">
              Total pot
              <strong id="gamePotValue">$0.00</strong>
            </div>
            <div id="gameTools" class="game-tools">
              <button id="qrButton" class="qr-button" type="button" aria-label="Show QR code">
                <canvas id="qrCanvas" width="64" height="64"></canvas>
              </button>
              <span id="qrHint" class="qr-hint">Expand view</span>
            </div>
            <div class="game-actions">
              <button id="playerTrendTrigger" class="player-trend-trigger hidden" type="button" aria-haspopup="dialog" aria-controls="playerTrendModal">
                <span id="playerPanelHeading">My Performance</span>
              </button>
            </div>
          </div>
        </div>

        <section id="settledNotice" class="banner banner-danger hidden">
          <div>
            <strong>Game settled.</strong>
            <p>Settled at <span id="settledAt">—</span>. Buy-ins are locked.</p>
          </div>
        </section>

        <div class="game-layout">
          <div id="hostLayout" class="host-layout">
            <div class="host-left">
              <div id="joinPanel" class="join-panel">
                <div class="share-panel">
                  <div class="link-row">
                    <input id="joinLink" class="sr-only" type="text" readonly />
                  </div>
                </div>
                <div class="join-card hidden">
                  <h3>Game settings</h3>
                  <label class="field">
                    <span>Game name</span>
                    <input id="gameName" type="text" />
                  </label>
                  <div class="row">
                    <label class="field">
                      <span>Currency</span>
                      <input id="currency" type="text" maxlength="3" />
                    </label>
                    <label class="field">
                      <span>Buy-in amount</span>
                      <input id="defaultBuyIn" type="number" min="1" step="1" />
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <div class="host-right">
              <section id="hostPanel" class="panel">
                <div class="panel-title host-title">
                  <div>
                    <h2>Host</h2>
                  </div>
                  <label class="toggle">
                    <input type="checkbox" id="hostModeToggle" />
                    <span>Transfer</span>
                  </label>
                </div>
                <div id="summary" class="summary"></div>
                <div class="host-actions">
                  <div class="host-actions-bar">
                    <button id="hostAddToggle" class="primary add-player-btn" type="button">+</button>
                    <button id="openSettle" class="danger-outline settle-cta">Settle game</button>
                  </div>
                  <div id="hostAddForm" class="host-add-form hidden">
                    <label class="field">
                      <span class="sr-only">Player name</span>
                      <input id="hostPlayerName" type="text" placeholder="Player name" />
                    </label>
                    <div id="hostRosterSuggestions" class="roster-suggestions hidden"></div>
                    <button id="hostAddPlayer" class="primary">Add player</button>
                  </div>
                </div>
                <div id="players" class="players"></div>
                <div class="players-pagination">
                  <button id="playersShowMore" class="ghost small players-show-more hidden" type="button">Show more</button>
                </div>
                <section id="settlementSummary" class="settlement-summary hidden"></section>
              </section>

              <section id="logPanel" class="panel log">
                <div class="panel-title">
                  <h2>Log</h2>
                  <p>Timestamped buy-ins.</p>
                </div>
                <div id="logTable" class="table"></div>
              </section>
            </div>
          </div>

          <section id="playerPanel" class="panel player-panel">
            <div class="panel-title" id="playerPanelTitle">
              <p id="playerPanelSubtitle">Join once, tap to add buy-ins.</p>
            </div>
            <div id="hostModeDock" class="host-mode-dock hidden">
              <label class="toggle">
                <input type="checkbox" id="hostModeToggleAlt" />
                <span>Transfer</span>
              </label>
            </div>
            <div id="playerJoin" class="player-join">
              <p id="playerJoinHelper" class="muted player-join-helper"></p>
              <label class="field">
                <span class="sr-only">Name</span>
                <input id="playerName" type="text" placeholder="Enter your name" />
              </label>
              <button id="joinAsPlayer" class="primary">Join game</button>
              <div id="playerMatchList" class="match-list hidden"></div>
              <p id="playerJoinNotice" class="muted hidden">Game settled — new players are closed.</p>
            </div>
            <div id="playerSeat" class="player-seat hidden">
              <div id="playerCard" class="player-card"></div>
              <div class="player-actions">
                <button id="playerAddDefault" class="primary">Add buy-in</button>
              </div>
              <div class="player-pulse-row">
                <button id="playerOthersLabel" class="player-others-label hidden" type="button" aria-expanded="false" aria-controls="playerOthers">
                  <span>Table pulse</span>
                  <span class="pulse-chevron" aria-hidden="true">&gt;</span>
                </button>
                <div id="playerOthers" class="player-others hidden"></div>
                <div id="playerToolRow" class="player-tool-row">
                  <button id="playerCheatLabel" class="player-others-label player-cheat-label hidden" type="button" aria-haspopup="dialog" aria-controls="playerCheatModal">
                    <span>Cheat Sheet</span>
                    <span class="cheat-chevron" aria-hidden="true">&gt;</span>
                  </button>
                  <button id="playerLeave" class="player-leave" type="button">Cash out &amp; leave</button>
                </div>
              </div>
              <div id="playerSettle" class="player-settle hidden">
                <label class="field">
                  <span id="playerSettleLabel">Chips remaining</span>
                  <input id="playerSettleAmount" type="number" min="0" step="0.01" inputmode="decimal" placeholder="Enter chips" />
                </label>
                <button id="playerSubmitChips" class="primary">Submit chips</button>
                <p id="playerSettleStatus" class="muted"></p>
              </div>
              <p id="playerNotice" class="muted hidden">Game settled — buy-ins are locked.</p>
              <div id="playerBuyins" class="player-buyins"></div>
            </div>
            <section id="playerSettledSummary" class="settlement-summary hidden"></section>
          </section>
        </div>
      </section>

      <section id="sessionsPanel" class="sessions hidden">
        <div class="sessions-bar">
          <div>
            <h2 id="sessionsTitle">Casual Sessions</h2>
          </div>
          <div class="sessions-actions">
            <button id="sessionsBack" class="ghost small stats-btn">Back</button>
            <button id="sessionsSettings" class="ghost small icon-button settings-button" type="button" aria-label="Settings">
              <svg class="gear-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M12 8.6a3.4 3.4 0 1 1 0 6.8 3.4 3.4 0 0 1 0-6.8Zm8.2 3.4c0-.4 0-.9-.1-1.3l-2-.3a6.9 6.9 0 0 0-.7-1.7l1.2-1.6c-.5-.6-1-1.1-1.6-1.6l-1.6 1.2c-.5-.3-1.1-.6-1.7-.7l-.3-2c-.4 0-.9-.1-1.3-.1s-.9 0-1.3.1l-.3 2c-.6.1-1.2.4-1.7.7L7 5.4c-.6.5-1.1 1-1.6 1.6l1.2 1.6c-.3.5-.6 1.1-.7 1.7l-2 .3c0 .4-.1.9-.1 1.3s0 .9.1 1.3l2 .3c.1.6.4 1.2.7 1.7l-1.2 1.6c.5.6 1 1.1 1.6 1.6l1.6-1.2c.5.3 1.1.6 1.7.7l.3 2c.4 0 .9.1 1.3.1s.9 0 1.3-.1l.3-2c.6-.1 1.2-.4 1.7-.7l1.6 1.2c.6-.5 1.1-1 1.6-1.6l-1.2-1.6c.3-.5.6-1.1.7-1.7l2-.3c.1-.4.1-.9.1-1.3Z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </button>
          </div>
        </div>

        <div id="sessionsGridHost">
          <div id="sessionsGrid" class="sessions-grid">
            <div class="landing-card">
              <h5 id="archivesTitle">Game archives</h5>
              <p class="muted">Open, review, and manage past sessions.</p>
              <div id="recentGames" class="recent-games"></div>
            </div>

            <div id="summaryCard" class="landing-card">
              <h5 id="summaryCardTitle">Quarterly Summary</h5>
              <p id="summaryCardCopy" class="muted">Pick a group and range to compute who pays who.</p>
              <label id="summaryGroupField" class="field">
                <span>Group</span>
                <select id="summaryGroup"></select>
              </label>
              <label class="field">
                <span>Quarter</span>
                <select id="summaryQuarter"></select>
              </label>
              <label class="field inline-toggle">
                <input id="summaryUseCustom" type="checkbox" />
                <span>Use custom range</span>
              </label>
              <div id="summaryCustomRow" class="row hidden">
                <label class="field">
                  <span>Custom start</span>
                  <input id="summaryStart" type="date" />
                </label>
                <label class="field">
                  <span>Custom end</span>
                  <input id="summaryEnd" type="date" />
                </label>
                <p class="hint">Custom range overrides quarter.</p>
              </div>
              <button id="openSummary" class="primary">View summary</button>
            </div>
          </div>
        </div>
      </section>

      <div id="settleModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section id="settlePanel" class="panel settle-panel">
          <div class="panel-title">
            <h2>Settle</h2>
            <p>Enter each player's remaining chips.</p>
          </div>
          <p id="settleError" class="form-error hidden"></p>
          <form id="settleForm" class="settle-form">
            <div id="settleList" class="settle-list"></div>
            <div class="settle-actions">
              <div class="settle-balance" aria-live="polite">
                <span>Pot balance</span>
                <strong id="settleRemaining">-$0.00</strong>
              </div>
              <div class="settle-buttons">
                <button id="settleCancel" type="button" class="ghost">Cancel</button>
                <button id="settleDiscrepancy" type="button" class="ghost">Count discrepancy</button>
                <button type="submit" class="primary">Save settlement</button>
              </div>
            </div>
          </form>
        </section>
      </div>

      <div id="discrepancyModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel discrepancy-panel">
          <div class="panel-title">
            <h2>Resolve discrepancy</h2>
            <p id="discrepancyHint" class="muted"></p>
          </div>
          <div class="discrepancy-options">
            <button id="discrepancyPositive" type="button" class="ghost">
              Split across players with positive net
            </button>
            <button id="discrepancyAll" type="button" class="ghost">
              Split across all players (including busted)
            </button>
          </div>
          <div class="roster-actions">
            <button id="discrepancyCancel" type="button" class="ghost">Cancel</button>
          </div>
        </section>
      </div>

      <div id="qrModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel qr-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>Scan to join</h2>
              <p class="muted">Point your camera at the code.</p>
            </div>
            <button id="qrClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <canvas id="qrCanvasLarge" width="240" height="240"></canvas>
        </section>
      </div>

      <div id="summaryModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel summary-panel">
          <div class="panel-title summary-header">
            <div>
              <h2 id="summaryTitle">Quarterly Summary</h2>
              <p id="summarySubtitle" class="muted"></p>
            </div>
            <button id="summaryClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div id="summaryBreakdown" class="summary-breakdown"></div>
          <div id="summaryTransfers" class="summary-transfers"></div>
        </section>
      </div>

      <div id="statsModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel stats-panel">
          <div class="panel-title summary-header">
            <div>
              <h2 id="statsTitle">Group stats</h2>
              <p id="statsSubtitle" class="muted"></p>
            </div>
            <button id="statsClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div class="stats-controls">
            <label class="field">
              <span>Range</span>
              <select id="statsRange"></select>
            </label>
          </div>
          <div id="statsSummary" class="summary"></div>
          <div class="stats-section">
            <h3>Leaderboard</h3>
            <div id="statsLeaderboard" class="stats-table"></div>
          </div>
        </section>
      </div>

      <div id="settingsModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel settings-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>Settings</h2>
            </div>
            <button id="settingsClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div class="settings-actions">
            <p class="muted">Global erase moved to Group Sessions -> Settings.</p>
          </div>
        </section>
      </div>

      <div id="groupsHubModal" class="modal modal-centered hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel groups-hub-panel">
          <div class="panel-title groups-hub-header">
            <div>
              <h2>Group Sessions</h2>
              <p class="muted">Select a group to view players.</p>
            </div>
            <button id="createGroup" class="group-create-plus-btn" type="button" aria-label="Create group">
              <span class="group-create-icon" aria-hidden="true">+</span>
            </button>
          </div>
          <div class="groups-hub-divider" aria-hidden="true"></div>
          <div id="groupList" class="group-list groups-hub-list"></div>
        </section>
      </div>

      <section id="groupModal" class="group-page hidden">
        <div class="panel group-page-panel">
          <div class="group-page-titlebar">
            <div>
              <h2 id="groupModalTitle">Group</h2>
            <p id="groupModalSubtitle" class="muted">Group members.</p>
            </div>
            <button id="groupModalClose" class="group-page-close" type="button" aria-label="Close group page">
              ×
            </button>
          </div>

          <div class="group-page-tabs" role="tablist" aria-label="Group sections">
            <button id="groupTabMembers" class="group-tab active" type="button" role="tab" aria-selected="true">
              Members
            </button>
            <button id="groupTabHistory" class="group-tab" type="button" role="tab" aria-selected="false">
              History
            </button>
            <button id="groupTabLeaderboard" class="group-tab" type="button" role="tab" aria-selected="false">
              Stats
            </button>
            <button id="groupTabSettings" class="group-tab" type="button" role="tab" aria-selected="false">
              Settings
            </button>
          </div>

          <section id="groupMembersPanel" class="group-tab-panel">
            <form id="groupPlayerForm" class="group-player-form hidden" autocomplete="off">
              <div class="group-player-add-row">
                <input id="groupPlayerName" type="text" placeholder="Add player" />
                <button id="groupPlayerAdd" class="ghost compact-icon-btn group-player-add-submit" type="submit" aria-label="Add player">
                  ✓
                </button>
                <button id="groupPlayerAddCancel" class="ghost compact-icon-btn group-player-add-cancel" type="button" aria-label="Clear player name">
                  ✕
                </button>
              </div>
            </form>
            <div id="groupPlayerList" class="group-player-list group-player-grid"></div>
          </section>

          <section id="groupHistoryPanel" class="group-tab-panel hidden">
            <div id="groupHistoryGridHost"></div>
          </section>

          <section id="groupStatsPanel" class="group-tab-panel hidden">
            <div class="stats-section group-stats-list-section">
              <h3>Leaderboard</h3>
              <p id="groupStatsSubtitle" class="muted group-stats-subtitle"></p>
              <div id="groupStatsLeaderboard" class="stats-table"></div>
            </div>
            <div class="group-stats-footer">
              <div class="stats-controls">
                <label class="field">
                  <select id="groupStatsRange" aria-label="Stats range"></select>
                </label>
              </div>
              <div id="groupStatsSummary" class="summary group-stats-summary"></div>
            </div>
          </section>

          <section id="groupSettingsPanel" class="group-tab-panel hidden">
            <div id="groupInfoContent" class="group-info-grid group-settings-info"></div>
            <div class="group-lock group-lock-bar">
              <div class="group-lock-state">
                <strong id="groupLockStatus">Open</strong>
              </div>
              <div class="group-lock-actions">
                <button id="groupLockSet" class="ghost compact-btn" type="button">Change Passcode</button>
                <button id="groupLockRemove" class="danger-outline compact-btn" type="button">Unlock Group</button>
              </div>
            </div>
            <div class="group-settings-actions">
              <button id="groupEditMembers" class="ghost compact-btn" type="button">Edit Group Members</button>
              <button id="groupRename" class="ghost compact-btn" type="button">Rename Group</button>
              <button id="groupDelete" class="danger-outline compact-btn" type="button">Delete Group</button>
              <button id="groupDeleteAllData" class="danger-outline compact-btn" type="button">
                Erase all Data
              </button>
            </div>
            <p class="muted group-settings-note">
              Use edit mode to remove players. Removed members keep their past game stats.
            </p>
          </section>
        </div>
      </section>

      <div id="createGroupModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel group-create-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>Create group</h2>
              <p class="muted">Name this group.</p>
            </div>
            <button id="createGroupClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <form id="createGroupForm" class="group-create-form">
            <label class="field">
              <span>Group name</span>
              <input id="createGroupName" type="text" placeholder="Friday Crew" />
            </label>
            <div class="roster-actions">
              <button id="createGroupCancel" class="ghost" type="button">Cancel</button>
              <button id="createGroupSubmit" class="primary" type="submit">Create group</button>
            </div>
          </form>
        </section>
      </div>

      <div id="guideModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel guide-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>Readme</h2>
              <p class="muted">How to use Poker Nights.</p>
            </div>
            <button id="guideClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div class="guide-content">
            <div class="guide-grid">
              <section class="guide-block">
                <h3>Start a game</h3>
                <div class="guide-steps">
                  <div class="guide-step">
                    <span class="guide-num">1</span>
                    <p>Tap <strong>Deal</strong> and enter host name + buy-in.</p>
                  </div>
                  <div class="guide-step">
                    <span class="guide-num">2</span>
                    <p>Select a group (optional), then tap <strong>Host Game</strong>.</p>
                  </div>
                  <div class="guide-step">
                    <span class="guide-num">3</span>
                    <p>Players join from <strong>Join Table</strong> or host QR.</p>
                  </div>
                </div>
              </section>

              <section class="guide-block">
                <h3>During live play</h3>
                <ul class="guide-list">
                  <li>Host controls pot, players, and host transfer.</li>
                  <li>Players use <strong>Add buy-in</strong> to re-enter.</li>
                  <li>All totals update live for everyone.</li>
                </ul>
              </section>

              <section class="guide-block">
                <h3>Settle flow</h3>
                <div class="guide-steps">
                  <div class="guide-step">
                    <span class="guide-num">1</span>
                    <p>Host taps <strong>Settle game</strong>.</p>
                  </div>
                  <div class="guide-step">
                    <span class="guide-num">2</span>
                    <p>Players submit remaining chips.</p>
                  </div>
                  <div class="guide-step">
                    <span class="guide-num">3</span>
                    <p>Host confirms totals and saves settlement.</p>
                  </div>
                </div>
              </section>

              <section class="guide-block">
                <h3>History and stats</h3>
                <ul class="guide-list">
                  <li><strong>History</strong>: past games by group.</li>
                  <li><strong>Leaderboard</strong>: ranked by net, with skill %.</li>
                  <li><strong>Quarterly Summary</strong>: who-pays-who from settled games.</li>
                </ul>
              </section>

              <section class="guide-block">
                <h3>Group rules</h3>
                <ul class="guide-list">
                  <li>Groups are optional.</li>
                  <li>Lock phrase protects group access.</li>
                  <li>Host role changes only through transfer.</li>
                </ul>
              </section>
            </div>
          </div>
        </section>
      </div>

      <div id="playerCheatModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel player-cheat-modal-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>Poker Cheat Sheet</h2>
            </div>
            <button id="playerCheatClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div id="playerCheatContent" class="player-cheat-content"></div>
        </section>
      </div>

      <div id="playerTrendModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel player-trend-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>My Performance</h2>
            </div>
            <button id="playerTrendClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div id="playerTrendContent" class="player-trend-content"></div>
        </section>
      </div>

      <div id="joinPlayerModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel join-player-panel">
          <h2 class="join-player-title">Find a seat</h2>
          <button id="joinPlayerClose" class="close-x modal-close-btn" type="button" aria-label="Close">✕</button>
          <div id="joinPlayerStepName" class="join-player-step">
            <label class="field">
              <span></span>
              <img class="join-seat-icon" src="assets/new.svg" alt="" aria-hidden="true" />
              <input id="joinPlayerName" type="text" placeholder="Name" />
            </label>
            <div class="roster-actions">
              <button id="joinPlayerContinue" class="primary" type="button">Continue</button>
            </div>
          </div>
          <div id="joinPlayerStepList" class="join-player-step hidden">
            <p id="joinPlayerListHint" class="muted"></p>
            <div id="joinPlayerGameList" class="join-player-list"></div>
            <div class="roster-actions">
              <button id="joinPlayerUseCode" class="ghost" type="button">Join by code</button>
            </div>
          </div>
          <div id="joinPlayerStepCode" class="join-player-step hidden">
            <p id="joinPlayerCodeHint" class="muted"></p>
            <label class="field">
              <span>Enter a game code</span>
              <input id="joinPlayerCode" type="text" placeholder="ABCD" />
            </label>
            <div class="roster-actions">
              <button id="joinPlayerBack" class="ghost" type="button">Back</button>
              <button id="joinPlayerSubmit" class="primary" type="button">Join game</button>
            </div>
          </div>
        </section>
      </div>

      <div id="lockPhraseModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel lock-modal">
          <div class="panel-title summary-header">
            <div>
              <h2>Enter lock phrase</h2>
              <p id="lockPhraseHint" class="muted"></p>
            </div>
            <button id="lockPhraseClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div class="lock-modal-body">
            <label class="field">
              <span>Lock phrase</span>
              <input id="lockPhraseInput" type="password" placeholder="Enter phrase" />
            </label>
          </div>
          <div class="roster-actions">
            <button id="lockPhraseCancel" class="ghost" type="button">Cancel</button>
            <button id="lockPhraseSubmit" class="primary" type="button">Unlock</button>
          </div>
        </section>
      </div>

      <div id="hostTransferModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel host-transfer-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>Pass host</h2>
              <p class="muted">Choose a player to take over host controls.</p>
            </div>
            <button id="hostTransferClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div id="hostTransferList" class="host-transfer-list"></div>
          <div class="roster-actions">
            <button id="hostTransferCancel" class="ghost" type="button">Cancel</button>
          </div>
        </section>
      </div>

      <div id="joinRequestModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel join-request-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>Join request</h2>
              <p id="joinRequestMessage" class="muted"></p>
            </div>
            <button id="joinRequestClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <div class="roster-actions">
            <button id="joinRequestReject" class="ghost" type="button">Decline</button>
            <button id="joinRequestApprove" class="primary" type="button">Approve</button>
          </div>
        </section>
      </div>

      <div id="confirmModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel confirm-panel">
          <div class="panel-title summary-header">
            <div>
              <h2>Are you sure?</h2>
              <p id="confirmMessage" class="muted"></p>
            </div>
          </div>
          <div class="roster-actions">
            <button id="confirmCancel" class="ghost" type="button">Cancel</button>
            <button id="confirmOk" class="danger-outline" type="button">Remove</button>
          </div>
        </section>
      </div>

      <div id="promptModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel prompt-panel">
          <div class="panel-title summary-header">
            <div>
              <h2 id="promptTitle">Enter value</h2>
              <p id="promptMessage" class="muted"></p>
            </div>
            <button id="promptClose" class="ghost modal-close-btn" type="button">Close</button>
          </div>
          <label class="field">
            <span class="sr-only">Value</span>
            <input id="promptInput" type="text" placeholder="" />
          </label>
          <div class="roster-actions">
            <button id="promptCancel" class="ghost" type="button">Cancel</button>
            <button id="promptSubmit" class="primary" type="button">Save</button>
          </div>
        </section>
      </div>

      <div id="rosterModal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-action="close"></div>
        <section class="panel roster-panel">
          <div class="panel-title summary-header">
            <div class="roster-title-wrap">
              <h2 id="rosterTitle">Group</h2>
              <div class="roster-label">Roster</div>
              <p class="muted">Who's playing?</p>
            </div>
          </div>
          <div id="rosterList" class="roster-list"></div>
          <div class="roster-actions">
            <button id="rosterCancel" class="ghost" type="button">Cancel</button>
            <button id="rosterStart" class="primary" type="button">Host game</button>
          </div>
        </section>
      </div>

      <footer class="footer">
        <span id="connectionStatus"></span>
        <span id="saveStatus"></span>
        <div class="footer-actions">
          <button id="openGuide" class="ghost small" type="button">Readme</button>
          <label class="toggle footer-toggle">
            <input type="checkbox" id="themeToggle" />
            <span class="sr-only">Toggle theme</span>
          </label>
        </div>
      </footer>
    </div>

    <script type="module" src="app.js?v=20260212a"></script>
  </body>
</html>
